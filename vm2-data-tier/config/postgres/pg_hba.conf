# PostgreSQL Client Authentication Configuration
# TYPE  DATABASE        USER            ADDRESS                 METHOD

# Local connections
local   all             all                                     scram-sha-256

# IPv4 local connections
host    all             all             127.0.0.1/32            scram-sha-256

# Allow connections from Edge Services VM (VLAN 10) - Authentik
hostssl authentik       authentik       10.10.10.10/32          scram-sha-256

# Allow connections from Media Apps VM (VLAN 12) - n8n, Paperless
hostssl n8n             n8n             10.10.12.10/32          scram-sha-256
hostssl paperless       paperless       10.10.12.10/32          scram-sha-256

# Allow connections from Web Apps VM (VLAN 13) - Coolify deployed apps
hostssl all             all             10.10.13.0/24           scram-sha-256

# Allow connections from Observability VM (VLAN 10) - Grafana
hostssl grafana         grafana         10.10.10.0/24           scram-sha-256

# Deny all other connections
host    all             all             all                     reject
